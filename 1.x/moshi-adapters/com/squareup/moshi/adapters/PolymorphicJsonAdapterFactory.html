<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_162) on Fri Nov 09 10:08:59 AEDT 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>PolymorphicJsonAdapterFactory (moshi-adapters 1.8.0 API)</title>
<meta name="date" content="2018-11-09">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PolymorphicJsonAdapterFactory (moshi-adapters 1.8.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PolymorphicJsonAdapterFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/squareup/moshi/adapters/EnumJsonAdapter.html" title="class in com.squareup.moshi.adapters"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/squareup/moshi/adapters/Rfc3339DateJsonAdapter.html" title="class in com.squareup.moshi.adapters"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" target="_top">Frames</a></li>
<li><a href="PolymorphicJsonAdapterFactory.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.squareup.moshi.adapters</div>
<h2 title="Class PolymorphicJsonAdapterFactory" class="title">Class PolymorphicJsonAdapterFactory&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.squareup.moshi.adapters.PolymorphicJsonAdapterFactory&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/JsonAdapter.Factory.html?is-external=true" title="class or interface in com.squareup.moshi">JsonAdapter.Factory</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">PolymorphicJsonAdapterFactory&lt;T&gt;</span>
extends java.lang.Object
implements <a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/JsonAdapter.Factory.html?is-external=true" title="class or interface in com.squareup.moshi">JsonAdapter.Factory</a></pre>
<div class="block">A JsonAdapter factory for objects that include type information in the JSON. When decoding JSON
 Moshi uses this type information to determine which class to decode to. When encoding Moshi uses
 the objectâ€™s class to determine what type information to include.

 <p>Suppose we have an interface, its implementations, and a class that uses them:

 <pre> <code>

   interface HandOfCards {
   }

   class BlackjackHand extends HandOfCards {
     Card hidden_card;
     List&lt;Card&gt; visible_cards;
   }

   class HoldemHand extends HandOfCards {
     Set&lt;Card&gt; hidden_cards;
   }

   class Player {
     String name;
     HandOfCards hand;
   }
 </code></pre>

 <p>We want to decode the following JSON into the player model above:

 <pre> <code>

   {
     "name": "Jesse",
     "hand": {
       "hand_type": "blackjack",
       "hidden_card": "9D",
       "visible_cards": ["8H", "4C"]
     }
   }
 </code></pre>

 <p>Left unconfigured, Moshi would incorrectly attempt to decode the hand object to the abstract
 <code>HandOfCards</code> interface. We configure it to use the appropriate subtype instead:

 <pre> <code>

   Moshi moshi = new Moshi.Builder()
       .add(PolymorphicJsonAdapterFactory.of(HandOfCards.class, "hand_type")
           .withSubtype(BlackjackHand.class, "blackjack")
           .withSubtype(HoldemHand.class, "holdem"))
       .build();
 </code></pre>

 <p>This class imposes strict requirements on its use:

 <ul>
   <li>Base types may be classes or interfaces. You may not use <code>Object.class</code> as a base
       type.
   <li>Subtypes must encode as JSON objects.
   <li>Type information must be in the encoded object. Each message must have a type label like
       <code>hand_type</code> whose value is a string like <code>blackjack</code> that identifies which type
       to use.
   <li>Each type identifier must be unique.
 </ul>

 <p>For best performance type information should be the first field in the object. Otherwise Moshi
 must reprocess the JSON stream once it knows the object's type.

 <p>If an unknown subtype is encountered when decoding, this will throw a <a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/JsonDataException.html?is-external=true" title="class or interface in com.squareup.moshi"><code>JsonDataException</code></a>. If an unknown type is encountered when encoding, this will throw an <code>IllegalArgumentException</code>.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/JsonAdapter.html?is-external=true" title="class or interface in com.squareup.moshi">JsonAdapter</a>&lt;?&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html#create-java.lang.reflect.Type-java.util.Set-com.squareup.moshi.Moshi-">create</a></span>(java.lang.reflect.Type&nbsp;type,
      java.util.Set&lt;? extends java.lang.annotation.Annotation&gt;&nbsp;annotations,
      <a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/Moshi.html?is-external=true" title="class or interface in com.squareup.moshi">Moshi</a>&nbsp;moshi)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static &lt;T&gt;&nbsp;<a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" title="class in com.squareup.moshi.adapters">PolymorphicJsonAdapterFactory</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html#of-java.lang.Class-java.lang.String-">of</a></span>(java.lang.Class&lt;T&gt;&nbsp;baseType,
  java.lang.String&nbsp;labelKey)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" title="class in com.squareup.moshi.adapters">PolymorphicJsonAdapterFactory</a>&lt;<a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" title="type parameter in PolymorphicJsonAdapterFactory">T</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html#withSubtype-java.lang.Class-java.lang.String-">withSubtype</a></span>(java.lang.Class&lt;? extends <a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" title="type parameter in PolymorphicJsonAdapterFactory">T</a>&gt;&nbsp;subtype,
           java.lang.String&nbsp;label)</code>
<div class="block">Returns a new factory that decodes instances of <code>subtype</code>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="of-java.lang.Class-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>of</h4>
<pre>@CheckReturnValue
public static&nbsp;&lt;T&gt;&nbsp;<a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" title="class in com.squareup.moshi.adapters">PolymorphicJsonAdapterFactory</a>&lt;T&gt;&nbsp;of(java.lang.Class&lt;T&gt;&nbsp;baseType,
                                                                        java.lang.String&nbsp;labelKey)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>baseType</code> - The base type for which this factory will create adapters. Cannot be Object.</dd>
<dd><code>labelKey</code> - The key in the JSON object whose value determines the type to which to map the
     JSON object.</dd>
</dl>
</li>
</ul>
<a name="withSubtype-java.lang.Class-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>withSubtype</h4>
<pre>public&nbsp;<a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" title="class in com.squareup.moshi.adapters">PolymorphicJsonAdapterFactory</a>&lt;<a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" title="type parameter in PolymorphicJsonAdapterFactory">T</a>&gt;&nbsp;withSubtype(java.lang.Class&lt;? extends <a href="../../../../com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" title="type parameter in PolymorphicJsonAdapterFactory">T</a>&gt;&nbsp;subtype,
                                                    java.lang.String&nbsp;label)</pre>
<div class="block">Returns a new factory that decodes instances of <code>subtype</code>. When an unknown type is found
 during encoding an IllegalArgumentException will be thrown. When an unknown label
 is found during decoding a <a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/JsonDataException.html?is-external=true" title="class or interface in com.squareup.moshi">JsonDataException</a> will be thrown.</div>
</li>
</ul>
<a name="create-java.lang.reflect.Type-java.util.Set-com.squareup.moshi.Moshi-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;<a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/JsonAdapter.html?is-external=true" title="class or interface in com.squareup.moshi">JsonAdapter</a>&lt;?&gt;&nbsp;create(java.lang.reflect.Type&nbsp;type,
                             java.util.Set&lt;? extends java.lang.annotation.Annotation&gt;&nbsp;annotations,
                             <a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/Moshi.html?is-external=true" title="class or interface in com.squareup.moshi">Moshi</a>&nbsp;moshi)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/JsonAdapter.Factory.html?is-external=true#create-java.lang.reflect.Type-java.util.Set-com.squareup.moshi.Moshi-" title="class or interface in com.squareup.moshi">create</a></code>&nbsp;in interface&nbsp;<code><a href="https://github.com/square/moshi/moshi/apidocs/com/squareup/moshi/JsonAdapter.Factory.html?is-external=true" title="class or interface in com.squareup.moshi">JsonAdapter.Factory</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PolymorphicJsonAdapterFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/squareup/moshi/adapters/EnumJsonAdapter.html" title="class in com.squareup.moshi.adapters"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/squareup/moshi/adapters/Rfc3339DateJsonAdapter.html" title="class in com.squareup.moshi.adapters"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.html" target="_top">Frames</a></li>
<li><a href="PolymorphicJsonAdapterFactory.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2018. All Rights Reserved.</small></p>
</body>
</html>
